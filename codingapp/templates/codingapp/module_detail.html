{% extends "codingapp/base.html" %}

{% block title %}
    {{ module.title }} - Coding Platform
{% endblock %}

{% block content %}
    <div class="card p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>{{ module.title }}</h2>
            {% if user.is_staff %}
                <div class="d-flex gap-2">
                    <a href="{% url 'edit_module' module.id %}" class="btn btn-warning btn-sm">Edit</a>
                    <a href="{% url 'delete_module' module.id %}" class="btn btn-danger btn-sm">Delete</a>
                </div>
            {% endif %}
        </div>
        <p>{{ module.description|default:"No description available." }}</p>

        {% if user.is_staff %}
            <a href="{% url 'add_question' module.id %}" class="btn btn-primary mb-4">Add Question</a>
        {% endif %}

        <h3>Questions</h3>
        <ul class="list-group">
            {% for question in module.questions.all %}
                <li class="list-group-item">
                    <a href="{% url 'question_detail' question.id %}" class="text-decoration-none">{{ question.title }}</a>
                </li>
            {% empty %}
                <li class="list-group-item text-muted">No questions available.</li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}